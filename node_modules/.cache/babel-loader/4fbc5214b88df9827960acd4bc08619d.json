{"remainingRequest":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/node_modules/babel-loader/lib/index.js!/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/node_modules/eslint-loader/index.js??ref--14-0!/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/src/store/modules/cart.js","dependencies":[{"path":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/src/store/modules/cart.js","mtime":1640771294000},{"path":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/babel.config.js","mtime":1640788484469},{"path":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/node_modules/cache-loader/dist/cjs.js","mtime":1639895256366},{"path":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/node_modules/babel-loader/lib/index.js","mtime":1639895256060},{"path":"/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/node_modules/eslint-loader/index.js","mtime":1639895274215}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9oYWZpei9EZXZlbG9wbWVudC9TZWxmIFByb2plY3RzL1Z1ZSBQcm9qZWN0cy92dWV4LW1vZHVsZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgc2hvcCBmcm9tICcuLi8uLi9hcGkvc2hvcCc7IC8vIGluaXRpYWwgc3RhdGUKLy8gc2hhcGU6IFt7IGlkLCBxdWFudGl0eSB9XQoKdmFyIHN0YXRlID0gewogIGl0ZW1zOiBbXSwKICBjaGVja291dFN0YXR1czogbnVsbAp9OyAvLyBnZXR0ZXJzCgp2YXIgZ2V0dGVycyA9IHsKICBjYXJ0UHJvZHVjdHM6IGZ1bmN0aW9uIGNhcnRQcm9kdWN0cyhzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaXRlbXMubWFwKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBpZCA9IF9yZWYuaWQsCiAgICAgICAgICBxdWFudGl0eSA9IF9yZWYucXVhbnRpdHk7CiAgICAgIHZhciBwcm9kdWN0ID0gcm9vdFN0YXRlLnByb2R1Y3RzLmFsbC5maW5kKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgcmV0dXJuIHByb2R1Y3QuaWQgPT09IGlkOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogcHJvZHVjdC5pZCwKICAgICAgICB0aXRsZTogcHJvZHVjdC50aXRsZSwKICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSwKICAgICAgICBxdWFudGl0eTogcXVhbnRpdHkKICAgICAgfTsKICAgIH0pOwogIH0sCiAgY2FydFRvdGFsUHJpY2U6IGZ1bmN0aW9uIGNhcnRUb3RhbFByaWNlKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZ2V0dGVycy5jYXJ0UHJvZHVjdHMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgcHJvZHVjdCkgewogICAgICByZXR1cm4gdG90YWwgKyBwcm9kdWN0LnByaWNlICogcHJvZHVjdC5xdWFudGl0eTsKICAgIH0sIDApOwogIH0KfTsgLy8gYWN0aW9ucwoKdmFyIGFjdGlvbnMgPSB7CiAgY2hlY2tvdXQ6IGZ1bmN0aW9uIGNoZWNrb3V0KF9yZWYyLCBwcm9kdWN0cykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwoKICAgIHZhciBzYXZlZENhcnRJdGVtcyA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS5pdGVtcyk7CgogICAgY29tbWl0KCdzZXRDaGVja291dFN0YXR1cycsIG51bGwpOyAvLyBlbXB0eSBjYXJ0CgogICAgY29tbWl0KCdzZXRDYXJ0SXRlbXMnLCB7CiAgICAgIGl0ZW1zOiBbXQogICAgfSk7CiAgICBzaG9wLmJ1eVByb2R1Y3RzKHByb2R1Y3RzLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBjb21taXQoJ3NldENoZWNrb3V0U3RhdHVzJywgJ3N1Y2Nlc3NmdWwnKTsKICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgY29tbWl0KCdzZXRDaGVja291dFN0YXR1cycsICdmYWlsZWQnKTsgLy8gcm9sbGJhY2sgdG8gdGhlIGNhcnQgc2F2ZWQgYmVmb3JlIHNlbmRpbmcgdGhlIHJlcXVlc3QKCiAgICAgIGNvbW1pdCgnc2V0Q2FydEl0ZW1zJywgewogICAgICAgIGl0ZW1zOiBzYXZlZENhcnRJdGVtcwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgYWRkUHJvZHVjdFRvQ2FydDogZnVuY3Rpb24gYWRkUHJvZHVjdFRvQ2FydChfcmVmMywgcHJvZHVjdCkgewogICAgdmFyIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgY29tbWl0KCdzZXRDaGVja291dFN0YXR1cycsIG51bGwpOwoKICAgIGlmIChwcm9kdWN0LmludmVudG9yeSA+IDApIHsKICAgICAgdmFyIGNhcnRJdGVtID0gc3RhdGUuaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBwcm9kdWN0LmlkOwogICAgICB9KTsKCiAgICAgIGlmICghY2FydEl0ZW0pIHsKICAgICAgICBjb21taXQoJ3B1c2hQcm9kdWN0VG9DYXJ0JywgewogICAgICAgICAgaWQ6IHByb2R1Y3QuaWQKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21taXQoJ2luY3JlbWVudEl0ZW1RdWFudGl0eScsIGNhcnRJdGVtKTsKICAgICAgfSAvLyByZW1vdmUgMSBpdGVtIGZyb20gc3RvY2sKCgogICAgICBjb21taXQoJ3Byb2R1Y3RzL2RlY3JlbWVudFByb2R1Y3RJbnZlbnRvcnknLCB7CiAgICAgICAgaWQ6IHByb2R1Y3QuaWQKICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfQp9OyAvLyBtdXRhdGlvbnMKCnZhciBtdXRhdGlvbnMgPSB7CiAgcHVzaFByb2R1Y3RUb0NhcnQ6IGZ1bmN0aW9uIHB1c2hQcm9kdWN0VG9DYXJ0KHN0YXRlLCBfcmVmNCkgewogICAgdmFyIGlkID0gX3JlZjQuaWQ7CiAgICBzdGF0ZS5pdGVtcy5wdXNoKHsKICAgICAgaWQ6IGlkLAogICAgICBxdWFudGl0eTogMQogICAgfSk7CiAgfSwKICBpbmNyZW1lbnRJdGVtUXVhbnRpdHk6IGZ1bmN0aW9uIGluY3JlbWVudEl0ZW1RdWFudGl0eShzdGF0ZSwgX3JlZjUpIHsKICAgIHZhciBpZCA9IF9yZWY1LmlkOwogICAgdmFyIGNhcnRJdGVtID0gc3RhdGUuaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgICB9KTsKICAgIGNhcnRJdGVtLnF1YW50aXR5Kys7CiAgfSwKICBzZXRDYXJ0SXRlbXM6IGZ1bmN0aW9uIHNldENhcnRJdGVtcyhzdGF0ZSwgX3JlZjYpIHsKICAgIHZhciBpdGVtcyA9IF9yZWY2Lml0ZW1zOwogICAgc3RhdGUuaXRlbXMgPSBpdGVtczsKICB9LAogIHNldENoZWNrb3V0U3RhdHVzOiBmdW5jdGlvbiBzZXRDaGVja291dFN0YXR1cyhzdGF0ZSwgc3RhdHVzKSB7CiAgICBzdGF0ZS5jaGVja291dFN0YXR1cyA9IHN0YXR1czsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/home/hafiz/Development/Self Projects/Vue Projects/vuex-modules/src/store/modules/cart.js"],"names":["shop","state","items","checkoutStatus","getters","cartProducts","rootState","map","id","quantity","product","products","all","find","title","price","cartTotalPrice","reduce","total","actions","checkout","commit","savedCartItems","buyProducts","addProductToCart","inventory","cartItem","item","root","mutations","pushProductToCart","push","incrementItemQuantity","setCartItems","setCheckoutStatus","status","namespaced"],"mappings":"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","sourcesContent":["import shop from '../../api/shop'\n\n// initial state\n// shape: [{ id, quantity }]\nconst state = {\n  items: [],\n  checkoutStatus: null\n}\n\n// getters\nconst getters = {\n  cartProducts: (state, getters, rootState) => {\n    return state.items.map(({ id, quantity }) => {\n      const product = rootState.products.all.find(product => product.id === id)\n      return {\n        id: product.id,\n        title: product.title,\n        price: product.price,\n        quantity\n      }\n    })\n  },\n\n  cartTotalPrice: (state, getters) => {\n    return getters.cartProducts.reduce((total, product) => {\n      return total + product.price * product.quantity\n    }, 0)\n  }\n}\n\n// actions\nconst actions = {\n  checkout ({ commit, state }, products) {\n    const savedCartItems = [...state.items]\n    commit('setCheckoutStatus', null)\n    // empty cart\n    commit('setCartItems', { items: [] })\n    shop.buyProducts(\n      products,\n      () => commit('setCheckoutStatus', 'successful'),\n      () => {\n        commit('setCheckoutStatus', 'failed')\n        // rollback to the cart saved before sending the request\n        commit('setCartItems', { items: savedCartItems })\n      }\n    )\n  },\n\n  addProductToCart ({ state, commit }, product) {\n    commit('setCheckoutStatus', null)\n    if (product.inventory > 0) {\n      const cartItem = state.items.find(item => item.id === product.id)\n      if (!cartItem) {\n        commit('pushProductToCart', { id: product.id })\n      } else {\n        commit('incrementItemQuantity', cartItem)\n      }\n      // remove 1 item from stock\n      commit('products/decrementProductInventory', { id: product.id }, { root: true })\n    }\n  }\n}\n\n// mutations\nconst mutations = {\n  pushProductToCart (state, { id }) {\n    state.items.push({\n      id,\n      quantity: 1\n    })\n  },\n\n  incrementItemQuantity (state, { id }) {\n    const cartItem = state.items.find(item => item.id === id)\n    cartItem.quantity++\n  },\n\n  setCartItems (state, { items }) {\n    state.items = items\n  },\n\n  setCheckoutStatus (state, status) {\n    state.checkoutStatus = status\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n"]}]}